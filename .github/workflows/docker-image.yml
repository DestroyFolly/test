name: Docker Compose CI

on:
  push:
    branches: [ main ] # Или другая ветка

jobs:
  build-and-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Build and run with Docker Compose
        uses: docker/compose-action@v2
        with:
          # Путь к docker-compose.yml (если не в корне репозитория)
          file: '../../src/docker-compose.yml'
          run: | # Запускаем необходимые сервисы и команды
            docker compose up -d --build postgres # Запускаем PostgreSQL
            docker compose run --rm app # Выполняем команду внутри контейнера 'app' (замените на вашу команду)
            docker compose down # Останавливаем и удаляем контейнеры
